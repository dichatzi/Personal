
-- CONNECT TO DATABASE
-- \connect sales_analysis

--CREATE DATABASE IF NOT EXISTS sales_analysis
--    WITH 
--    OWNER = postgres
--    ENCODING = 'UTF8'
--    LC_COLLATE = 'English_United States.1252'
--    LC_CTYPE = 'English_United States.1252'
--    TABLESPACE = pg_default
--    CONNECTION LIMIT = -1;



-- ***************************************************************************************************************************
-- SCHEMAS
-- ***************************************************************************************************************************

-- [grid_data] schema
CREATE SCHEMA IF NOT EXISTS grid_data AUTHORIZATION postgres;

-- [market_data] schema
CREATE SCHEMA IF NOT EXISTS market_data AUTHORIZATION postgres;

-- [input_data] schema
CREATE SCHEMA IF NOT EXISTS input_data AUTHORIZATION postgres;

-- [measurement_data] schema
CREATE SCHEMA IF NOT EXISTS measurement_data AUTHORIZATION postgres;

-- [measurements] schema
CREATE SCHEMA IF NOT EXISTS measurements AUTHORIZATION postgres;

-- [tests] schema
CREATE SCHEMA IF NOT EXISTS tests AUTHORIZATION postgres;





CREATE TABLE IF NOT EXISTS grid_data.customers
(
    business_partner_name character varying(100) NOT NULL,
    tax_number character varying(15) NOT NULL,
    official_document_number character varying(20) NOT NULL,
	print_document_number character varying(20) NOT NULL,
    region bigint NOT NULL,
    pod character varying(15) NOT NULL,
    successor character varying(5) NOT NULL,
    street character varying(100),
    street_code character varying(10),
    city character varying(100),
    postal_code character varying(6),
	supply_id character varying(15),
    PRIMARY KEY (supply_id),
	UNIQUE (supply_id)
);

ALTER TABLE IF EXISTS grid_data.customers
    OWNER to postgres;
	
	
-- *******************************************************************************
-- Table GRID REPORT
-- Schema name: grid_data
-- Table name: grid_report
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS grid_data.grid_report
(
	publication_year bigint NOT NULL,
	publication_month bigint NOT NULL,
	business_partner character varying(20) NOT NULL,
    business_partner_name character varying(100) NOT NULL,
    tax_number character varying(15) NOT NULL,
    official_document_number character varying(20) NOT NULL,
	print_document_number character varying(20) NOT NULL,
    region character varying(5) NOT NULL,
    pod character varying(15) NOT NULL,
    successor character varying(5) NOT NULL,
    street character varying(100),
    street_code character varying(10),
    city character varying(100),
    postal_code character varying(6),
	ppc_rate character varying(10),
	package_no character varying(20),
	package character varying(50),
	contract_account character varying(20),
	coll_account character varying(20),
	invoicing_service_provider character varying(30),
	consumption_date_from date,
	consumption_date_to date,
	days_of_cons bigint, 
	previous_mr_result_day numeric(20,5),
	last_mr_result_day numeric(20,5),
	reg_fact_day numeric(10,5),
	cons_day numeric(20,5),
	previous_mr_result_night numeric(20,5),
	last_mr_result_night numeric(20,5),
	reg_fact_night numeric(10,5),
	cons_night numeric(20,5),
	previous_mr_result numeric(20,5),
	last_mr_result numeric(20,5),
	reg_fact numeric(10,5),
	cons_peak numeric(20,5),
	xz numeric(10,5),
	cosphi numeric(10,5),
	fixed_price numeric(20,5),
	demand_charge numeric(20,5),
	amount_first_mru_day_cons numeric(20,5),
	amount_night_cons numeric(20,5),
	additional_cost numeric(20,5),
	average_mcp_period numeric(20,5),
	network_charges numeric(20,5),
	smp_charge numeric(20,5),
	tya_discount numeric(20,5),
	pot_discount numeric(20,5),
	kot_discount numeric(20,5),
	ener_vat_discount numeric(20,5),
	ebill_discount numeric(20,5),
	dir_deb_discount numeric(20,5),
	payment_discount numeric(20,5),
	co2_charge numeric(20,5),
	elape numeric(20,5),
	deth numeric(20,5),
	green_charge numeric(20,5),
	xxs numeric(20,5),
	xxdm numeric(20,5),
	yko numeric(20,5),
	smog_discount numeric(20,5),
	nt_other_charges numeric(20,5),
	amount_of_cons numeric(20,5),
	a_cons_and_network numeric(20,5),
	ape numeric(20,5),
	efk numeric(20,5),
	mhdeia_discount numeric(20,5),
	discount_of_cons numeric(20,5),
	bonus_of_start numeric(20,5),
	total_electricity numeric(20,5),
	a_estimated_bill numeric(20,5),
	other_charges numeric(20,5),
	dno_service_charges numeric(20,5),
	commitment numeric(20,5),
	total_electricity_without_vat numeric(20,5),
	vat_amount numeric(20,5),
	services_vat numeric(20,5),
	dete numeric(20,5),
	municip_charges numeric(20,5),
	tv numeric(20,5),
	security_deposit numeric(20,5),
	pv_credit numeric(20,5),
	total_amount_current_bill numeric(20,5),
	previous_debt numeric(20,5),
	interest numeric(20,5),
	interest_tax numeric(20,5),
	empty_column character varying(20),
	total_amount numeric(20,5),
	posting_date date,
	net_due_date date,
	bill_type character varying(20),
	
    PRIMARY KEY (publication_year, publication_month, business_partner, business_partner_name, tax_number, official_document_number, print_document_number, region, pod, successor),
	UNIQUE (publication_year, publication_month, business_partner, business_partner_name, tax_number, official_document_number, print_document_number, region, pod, successor)
);

ALTER TABLE IF EXISTS grid_data.grid_report
    OWNER to postgres;
	
	
-- *******************************************************************************
-- Table GRID REPORT MONTHLY ANALYSIS
-- Schema name: input_data
-- Table name: grid_report_monthly_analysis
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS input_data.grid_report_monthly_analysis
(
	-- Primary keys
	publication_year bigint NOT NULL,
	publication_month bigint NOT NULL,
	settlement_year bigint NOT NULL,
	settlement_month bigint NOT NULL,
	settlement_type character varying(20),
	region character varying(5) NOT NULL,
	ppc_rate character varying(10),
	bill_type character varying(20),
	
	-- Table data
	cons_day numeric(20,5),
	cons_night numeric(20,5),
	fixed_price numeric(20,5),
	demand_charge numeric(20,5),
	amount_first_mru_day_cons numeric(20,5),
	amount_night_cons numeric(20,5),
	additional_cost numeric(20,5),
	average_mcp_period numeric(20,5),
	network_charges numeric(20,5),
	smp_charge numeric(20,5),
	tya_discount numeric(20,5),
	pot_discount numeric(20,5),
	kot_discount numeric(20,5),
	ener_vat_discount numeric(20,5),
	ebill_discount numeric(20,5),
	dir_deb_discount numeric(20,5),
	payment_discount numeric(20,5),
	co2_charge numeric(20,5),
	elape numeric(20,5),
	deth numeric(20,5),
	green_charge numeric(20,5),
	xxs numeric(20,5),
	xxdm numeric(20,5),
	yko numeric(20,5),
	smog_discount numeric(20,5),
	nt_other_charges numeric(20,5),
	amount_of_cons numeric(20,5),
	cons_network numeric(20,5),
	ape numeric(20,5),
	efk numeric(20,5),
	mhdeia_discount numeric(20,5),
	discount_cons numeric(20,5),
	bonus_of_start numeric(20,5),
	total_electricity numeric(20,5),
	estimated_bill numeric(20,5),
	other_charges numeric(20,5),
	dno_service_charges numeric(20,5),
	commitment numeric(20,5),
	total_electricity_no_vat numeric(20,5),
	vat_amount numeric(20,5),
	services_vat numeric(20,5),
	dete numeric(20,5),
	municipality_charges numeric(20,5),
	tv numeric(20,5),
	security_deposit numeric(20,5),
	pv_credit numeric(20,5),
	total_amount_current_bill numeric(20,5),
	previous_debt numeric(20,5),
	interest numeric(20,5),
	interest_tax numeric(20,5),
	total_amount numeric(20,5),
	
	
    PRIMARY KEY (publication_year, publication_month, settlement_year, settlement_month, settlement_type, region, ppc_rate, bill_type),
	UNIQUE (publication_year, publication_month, settlement_year, settlement_month, settlement_type, region, ppc_rate, bill_type)
);

ALTER TABLE IF EXISTS input_data.grid_report_monthly_analysis
    OWNER to postgres;
	
	
-- *******************************************************************************
-- Table COSTING LV
-- Schema name: input_data
-- Table name: costing_lv
-- *******************************************************************************	
CREATE TABLE IF NOT EXISTS input_data.costing_lv
(
	-- Primary keys
	settlement_year bigint NOT NULL,
	settlement_month bigint NOT NULL,
	
	-- Table data
	settlement_type character varying(30), 
	losses numeric(20,5), 
	dso_measurement_clearing numeric(20,5), 
	power_theft numeric(20,5), 
	consumption_no_losses numeric(20,5), 
	market_clearing_price numeric(20,5), 
	profile_cost numeric(20,5), 
	imbalance_settlement numeric(20,5), 
	uplift_cost_1 numeric(20,5), 
	uplift_cost_2 numeric(20,5), 
	uplift_cost_3 numeric(20,5), 
	uplift_costs numeric(20,5), 
	capacity_remuneration numeric(20,5), 
	mmkths numeric(20,5), 
	lv_clearing numeric(20,5), 
	nominal_losses numeric(20,5), 
	losses_cost numeric(20,5), 
	other_costs numeric(20,5), 
	total_costs numeric(20,5),
	
    PRIMARY KEY (settlement_year, settlement_month),
	UNIQUE (settlement_type, losses, dso_measurement_clearing, power_theft, consumption_no_losses, market_clearing_price, profile_cost, imbalance_settlement, uplift_cost_1, uplift_cost_2, uplift_cost_3, uplift_costs, capacity_remuneration, mmkths, lv_clearing, nominal_losses, losses_cost, other_costs, total_costs)
);

ALTER TABLE IF EXISTS input_data.costing_lv
    OWNER to postgres;	
	
	
-- *******************************************************************************
-- Table COSTING MV
-- Schema name: input_data
-- Table name: costing_mv
-- *******************************************************************************	
CREATE TABLE IF NOT EXISTS input_data.costing_mv
(
	-- Primary keys
	settlement_year bigint NOT NULL,
	settlement_month bigint NOT NULL,
	
	-- Table data
	settlement_type character varying(30), 
	losses numeric(20,5), 
	dso_measurement_clearing numeric(20,5), 
	power_theft numeric(20,5), 
	consumption_no_losses numeric(20,5), 
	market_clearing_price numeric(20,5), 
	profile_cost numeric(20,5), 
	imbalance_settlement numeric(20,5), 
	uplift_cost_1 numeric(20,5), 
	uplift_cost_2 numeric(20,5), 
	uplift_cost_3 numeric(20,5), 
	uplift_costs numeric(20,5), 
	capacity_remuneration numeric(20,5), 
	mmkths numeric(20,5), 
	lv_clearing numeric(20,5), 
	nominal_losses numeric(20,5), 
	losses_cost numeric(20,5), 
	other_costs numeric(20,5), 
	total_costs numeric(20,5),
	
    PRIMARY KEY (settlement_year, settlement_month),
	UNIQUE (settlement_type, losses, dso_measurement_clearing, power_theft, consumption_no_losses, market_clearing_price, profile_cost, imbalance_settlement, uplift_cost_1, uplift_cost_2, uplift_cost_3, uplift_costs, capacity_remuneration, mmkths, lv_clearing, nominal_losses, losses_cost, other_costs, total_costs)
);

ALTER TABLE IF EXISTS input_data.costing_mv
    OWNER to postgres;	
	
	
-- *******************************************************************************
-- Table: MARKET CLEARING PRICE
-- Schema name: market_data
-- Table name: market_clearing_price
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS market_data.market_clearing_price
(
    trading_day DATE NOT NULL,
	trading_period INT NOT NULL,
	market_clearing_price NUMERIC(20,3),
    PRIMARY KEY (trading_day, trading_period),
	UNIQUE (trading_day, trading_period)
);

ALTER TABLE IF EXISTS market_data.market_clearing_price
    OWNER to postgres;
		
	
-- *******************************************************************************
-- Table: WEEK+1 SETTLEMENT METERED QUANTITIES
-- Schema name: market_data
-- Table name: week1_settlement_metered_quantities
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS market_data.week1_settlement_metered_quantities
(
	determinant_name CHARACTER VARYING(100) NOT NULL,
	voltage_entity CHARACTER VARYING(100) NOT NULL,
    settlement_date_from TIMESTAMP NOT NULL,
	settlement_date_to TIMESTAMP NOT NULL,
	quarter_position INT NOT NULL,
	settlement_value NUMERIC(20,3),
    PRIMARY KEY (determinant_name, voltage_entity, settlement_date_from, settlement_date_to, quarter_position),
	UNIQUE (determinant_name, voltage_entity, settlement_date_from, settlement_date_to, quarter_position)
);

ALTER TABLE IF EXISTS market_data.week1_settlement_metered_quantities
    OWNER to postgres;		
	

-- *******************************************************************************
-- Table: WEEK+1 SETTLEMENT ACTIVATED ENERGY AND PRICES
-- Schema name: market_data
-- Table name: week1_settlement_activated_energy_prices
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS market_data.week1_settlement_activated_energy_prices
(
	settlement_date_from TIMESTAMP NOT NULL,
	settlement_date_to TIMESTAMP NOT NULL,
	quarter_position INT NOT NULL,
	imb_price NUMERIC(20,3),
	imb_price_up NUMERIC(20,3),
	imb_price_dn NUMERIC(20,3),
	abe NUMERIC(20,3),
	abe_up NUMERIC(20,3),
	abe_dn NUMERIC(20,3),
    PRIMARY KEY (settlement_date_from, settlement_date_to, quarter_position),
	UNIQUE (settlement_date_from, settlement_date_to, quarter_position)
);

ALTER TABLE IF EXISTS market_data.week1_settlement_activated_energy_prices
    OWNER to postgres;	
	
	
-- *******************************************************************************
-- Table: CORRECTED (WEEK+5) SETTLEMENT METERED QUANTITIES
-- Schema name: market_data
-- Table name: week5_settlement_metered_quantities
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS market_data.week5_settlement_metered_quantities
(
	determinant_name CHARACTER VARYING(100) NOT NULL,
	voltage_entity CHARACTER VARYING(100) NOT NULL,
    settlement_date_from TIMESTAMP NOT NULL,
	settlement_date_to TIMESTAMP NOT NULL,
	quarter_position INT NOT NULL,
	settlement_value NUMERIC(20,3),
    PRIMARY KEY (determinant_name, voltage_entity, settlement_date_from, settlement_date_to, quarter_position),
	UNIQUE (determinant_name, voltage_entity, settlement_date_from, settlement_date_to, quarter_position)
);

ALTER TABLE IF EXISTS market_data.week5_settlement_metered_quantities
    OWNER to postgres;
	

-- *******************************************************************************
-- Table: CORRECTED (WEEK+5) SETTLEMENT ACTIVATED ENERGY AND PRICES
-- Schema name: market_data
-- Table name: week5_settlement_activated_energy_prices
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS market_data.week5_settlement_activated_energy_prices
(
	settlement_date_from TIMESTAMP NOT NULL,
	settlement_date_to TIMESTAMP NOT NULL,
	quarter_position INT NOT NULL,
	imb_price NUMERIC(20,3),
	imb_price_up NUMERIC(20,3),
	imb_price_dn NUMERIC(20,3),
	abe NUMERIC(20,3),
	abe_up NUMERIC(20,3),
	abe_dn NUMERIC(20,3),
    PRIMARY KEY (settlement_date_from, settlement_date_to, quarter_position),
	UNIQUE (settlement_date_from, settlement_date_to, quarter_position)
);

ALTER TABLE IF EXISTS market_data.week5_settlement_activated_energy_prices
    OWNER to postgres;		
	

-- *******************************************************************************
-- Table: MV DSO MEASUREMENT DATA
-- Schema name: measurement_data
-- Table name: mv_measurements
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS measurement_data.mv_measurements
(
	meter_number CHARACTER VARYING(20) NOT NULL,
	supply_number CHARACTER VARYING(20) NOT NULL,
	region CHARACTER VARYING(5) NOT NULL,
	pod CHARACTER VARYING(20) NOT NULL,
	successor CHARACTER VARYING(5) NOT NULL,
	supply_type CHARACTER VARYING(20) NOT NULL,
	trading_date TIMESTAMP NOT NULL,
	pos1 NUMERIC(20,3),
	pos2 NUMERIC(20,3),
	pos3 NUMERIC(20,3),
	pos4 NUMERIC(20,3),
	pos5 NUMERIC(20,3),
	pos6 NUMERIC(20,3),
	pos7 NUMERIC(20,3),
	pos8 NUMERIC(20,3),
	pos9 NUMERIC(20,3),
	pos10 NUMERIC(20,3),
	pos11 NUMERIC(20,3),
	pos12 NUMERIC(20,3),
	pos13 NUMERIC(20,3),
	pos14 NUMERIC(20,3),
	pos15 NUMERIC(20,3),
	pos16 NUMERIC(20,3),
	pos17 NUMERIC(20,3),
	pos18 NUMERIC(20,3),
	pos19 NUMERIC(20,3),
	pos20 NUMERIC(20,3),
	pos21 NUMERIC(20,3),
	pos22 NUMERIC(20,3),
	pos23 NUMERIC(20,3),
	pos24 NUMERIC(20,3),
	pos25 NUMERIC(20,3),
	pos26 NUMERIC(20,3),
	pos27 NUMERIC(20,3),
	pos28 NUMERIC(20,3),
	pos29 NUMERIC(20,3),
	pos30 NUMERIC(20,3),
	pos31 NUMERIC(20,3),
	pos32 NUMERIC(20,3),
	pos33 NUMERIC(20,3),
	pos34 NUMERIC(20,3),
	pos35 NUMERIC(20,3),
	pos36 NUMERIC(20,3),
	pos37 NUMERIC(20,3),
	pos38 NUMERIC(20,3),
	pos39 NUMERIC(20,3),
	pos40 NUMERIC(20,3),
	pos41 NUMERIC(20,3),
	pos42 NUMERIC(20,3),
	pos43 NUMERIC(20,3),
	pos44 NUMERIC(20,3),
	pos45 NUMERIC(20,3),
	pos46 NUMERIC(20,3),
	pos47 NUMERIC(20,3),
	pos48 NUMERIC(20,3),
	pos49 NUMERIC(20,3),
	pos50 NUMERIC(20,3),
	pos51 NUMERIC(20,3),
	pos52 NUMERIC(20,3),
	pos53 NUMERIC(20,3),
	pos54 NUMERIC(20,3),
	pos55 NUMERIC(20,3),
	pos56 NUMERIC(20,3),
	pos57 NUMERIC(20,3),
	pos58 NUMERIC(20,3),
	pos59 NUMERIC(20,3),
	pos60 NUMERIC(20,3),
	pos61 NUMERIC(20,3),
	pos62 NUMERIC(20,3),
	pos63 NUMERIC(20,3),
	pos64 NUMERIC(20,3),
	pos65 NUMERIC(20,3),
	pos66 NUMERIC(20,3),
	pos67 NUMERIC(20,3),
	pos68 NUMERIC(20,3),
	pos69 NUMERIC(20,3),
	pos70 NUMERIC(20,3),
	pos71 NUMERIC(20,3),
	pos72 NUMERIC(20,3),
	pos73 NUMERIC(20,3),
	pos74 NUMERIC(20,3),
	pos75 NUMERIC(20,3),
	pos76 NUMERIC(20,3),
	pos77 NUMERIC(20,3),
	pos78 NUMERIC(20,3),
	pos79 NUMERIC(20,3),
	pos80 NUMERIC(20,3),
	pos81 NUMERIC(20,3),
	pos82 NUMERIC(20,3),
	pos83 NUMERIC(20,3),
	pos84 NUMERIC(20,3),
	pos85 NUMERIC(20,3),
	pos86 NUMERIC(20,3),
	pos87 NUMERIC(20,3),
	pos88 NUMERIC(20,3),
	pos89 NUMERIC(20,3),
	pos90 NUMERIC(20,3),
	pos91 NUMERIC(20,3),
	pos92 NUMERIC(20,3),
	pos93 NUMERIC(20,3),
	pos94 NUMERIC(20,3),
	pos95 NUMERIC(20,3),
	pos96 NUMERIC(20,3),
	pos97 NUMERIC(20,3),
	pos98 NUMERIC(20,3),
	pos99 NUMERIC(20,3),
	pos100 NUMERIC(20,3),
    PRIMARY KEY (meter_number, supply_number, region, pod, successor, supply_type, trading_date),
	UNIQUE (meter_number, supply_number, region, pod, successor, supply_type, trading_date)
);

ALTER TABLE IF EXISTS measurement_data.mv_measurements
    OWNER to postgres;		
	
	
-- *******************************************************************************
-- Table CUSTOMER LIST
-- Schema name: input_data
-- Table name: customer_list
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS input_data.customer_list
(
	business_partner character varying(100) NOT NULL,
    tax_code character varying(15),
    ky character varying(5),
    important character varying(10),
    customer_type character varying(20),
    member_of character varying(20),
    contract character varying(10),
    telephone_number character varying(20),
    telephone_number_2 character varying(20),
    e_mail character varying(100),
    attn character varying(100),
    agent_code character varying(30),
    agent_name character varying(200),
    agent_type character varying(20),
    district character varying(3),
    pod character varying(10),
    succ_id character varying(3),
    last_digit character varying(3),
    contract_account character varying(20),
    phase character varying(3),
    voltage character varying(10),
    street_name character varying(100),
    street_no character varying(20),
    city character varying(100),
    region character varying(10),
    postal_code character varying(10),
    customer_location character varying(20),
    posting_street_name character varying(100),
    posting_street_no character varying(20),
    posting_city character varying(100),
    posting_postal_code character varying(10),
    package character varying(200),
    rate_type_ppc character varying(10),
    payment_code character varying(30),
    contracted_capacity numeric(20,3),
    warranty numeric(20,3),
    contract_start_date date,
    date_of_creation date,
    move_in_date date,
    move_out_date date,
    termination_date date,
    initial_measurement character varying(5),
    last_ex_post_measurement numeric(20,3),
    contract_status character varying(20),
    last_change_date date,
    dunning_level character varying(100),
    execution_date date,
	
    PRIMARY KEY (district, pod, succ_id),
	UNIQUE (district, pod, succ_id)
);

ALTER TABLE IF EXISTS input_data.customer_list
    OWNER to postgres;	
		
	
-- *******************************************************************************
-- Table MV CERTIFIED MEASUREMENTS
-- Schema name: measurements
-- Table name: mv_certified
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS measurements.mv_certified
(
	meter_name character varying(20) NOT NULL,
    customer character varying(20),
    power_type character varying(20),
    trading_date date,
    receipt_date date,
    t_1 numeric(20,6),
	t_1e character varying(10),
	t_2 numeric(20,6),
	t_2e character varying(10),
	t_3 numeric(20,6),
	t_3e character varying(10),
	t_4 numeric(20,6),
	t_4e character varying(10),
	t_5 numeric(20,6),
	t_5e character varying(10),
	t_6 numeric(20,6),
	t_6e character varying(10),
	t_7 numeric(20,6),
	t_7e character varying(10),
	t_8 numeric(20,6),
	t_8e character varying(10),
	t_9 numeric(20,6),
	t_9e character varying(10),
	t_10 numeric(20,6),
	t_10e character varying(10),
	t_11 numeric(20,6),
	t_11e character varying(10),
	t_12 numeric(20,6),
	t_12e character varying(10),
	t_13 numeric(20,6),
	t_13e character varying(10),
	t_14 numeric(20,6),
	t_14e character varying(10),
	t_15 numeric(20,6),
	t_15e character varying(10),
	t_16 numeric(20,6),
	t_16e character varying(10),
	t_17 numeric(20,6),
	t_17e character varying(10),
	t_18 numeric(20,6),
	t_18e character varying(10),
	t_19 numeric(20,6),
	t_19e character varying(10),
	t_20 numeric(20,6),
	t_20e character varying(10),
	t_21 numeric(20,6),
	t_21e character varying(10),
	t_22 numeric(20,6),
	t_22e character varying(10),
	t_23 numeric(20,6),
	t_23e character varying(10),
	t_24 numeric(20,6),
	t_24e character varying(10),
	t_25 numeric(20,6),
	t_25e character varying(10),
	t_26 numeric(20,6),
	t_26e character varying(10),
	t_27 numeric(20,6),
	t_27e character varying(10),
	t_28 numeric(20,6),
	t_28e character varying(10),
	t_29 numeric(20,6),
	t_29e character varying(10),
	t_30 numeric(20,6),
	t_30e character varying(10),
	t_31 numeric(20,6),
	t_31e character varying(10),
	t_32 numeric(20,6),
	t_32e character varying(10),
	t_33 numeric(20,6),
	t_33e character varying(10),
	t_34 numeric(20,6),
	t_34e character varying(10),
	t_35 numeric(20,6),
	t_35e character varying(10),
	t_36 numeric(20,6),
	t_36e character varying(10),
	t_37 numeric(20,6),
	t_37e character varying(10),
	t_38 numeric(20,6),
	t_38e character varying(10),
	t_39 numeric(20,6),
	t_39e character varying(10),
	t_40 numeric(20,6),
	t_40e character varying(10),
	t_41 numeric(20,6),
	t_41e character varying(10),
	t_42 numeric(20,6),
	t_42e character varying(10),
	t_43 numeric(20,6),
	t_43e character varying(10),
	t_44 numeric(20,6),
	t_44e character varying(10),
	t_45 numeric(20,6),
	t_45e character varying(10),
	t_46 numeric(20,6),
	t_46e character varying(10),
	t_47 numeric(20,6),
	t_47e character varying(10),
	t_48 numeric(20,6),
	t_48e character varying(10),
	t_49 numeric(20,6),
	t_49e character varying(10),
	t_50 numeric(20,6),
	t_50e character varying(10),
	t_51 numeric(20,6),
	t_51e character varying(10),
	t_52 numeric(20,6),
	t_52e character varying(10),
	t_53 numeric(20,6),
	t_53e character varying(10),
	t_54 numeric(20,6),
	t_54e character varying(10),
	t_55 numeric(20,6),
	t_55e character varying(10),
	t_56 numeric(20,6),
	t_56e character varying(10),
	t_57 numeric(20,6),
	t_57e character varying(10),
	t_58 numeric(20,6),
	t_58e character varying(10),
	t_59 numeric(20,6),
	t_59e character varying(10),
	t_60 numeric(20,6),
	t_60e character varying(10),
	t_61 numeric(20,6),
	t_61e character varying(10),
	t_62 numeric(20,6),
	t_62e character varying(10),
	t_63 numeric(20,6),
	t_63e character varying(10),
	t_64 numeric(20,6),
	t_64e character varying(10),
	t_65 numeric(20,6),
	t_65e character varying(10),
	t_66 numeric(20,6),
	t_66e character varying(10),
	t_67 numeric(20,6),
	t_67e character varying(10),
	t_68 numeric(20,6),
	t_68e character varying(10),
	t_69 numeric(20,6),
	t_69e character varying(10),
	t_70 numeric(20,6),
	t_70e character varying(10),
	t_71 numeric(20,6),
	t_71e character varying(10),
	t_72 numeric(20,6),
	t_72e character varying(10),
	t_73 numeric(20,6),
	t_73e character varying(10),
	t_74 numeric(20,6),
	t_74e character varying(10),
	t_75 numeric(20,6),
	t_75e character varying(10),
	t_76 numeric(20,6),
	t_76e character varying(10),
	t_77 numeric(20,6),
	t_77e character varying(10),
	t_78 numeric(20,6),
	t_78e character varying(10),
	t_79 numeric(20,6),
	t_79e character varying(10),
	t_80 numeric(20,6),
	t_80e character varying(10),
	t_81 numeric(20,6),
	t_81e character varying(10),
	t_82 numeric(20,6),
	t_82e character varying(10),
	t_83 numeric(20,6),
	t_83e character varying(10),
	t_84 numeric(20,6),
	t_84e character varying(10),
	t_85 numeric(20,6),
	t_85e character varying(10),
	t_86 numeric(20,6),
	t_86e character varying(10),
	t_87 numeric(20,6),
	t_87e character varying(10),
	t_88 numeric(20,6),
	t_88e character varying(10),
	t_89 numeric(20,6),
	t_89e character varying(10),
	t_90 numeric(20,6),
	t_90e character varying(10),
	t_91 numeric(20,6),
	t_91e character varying(10),
	t_92 numeric(20,6),
	t_92e character varying(10),
	t_93 numeric(20,6),
	t_93e character varying(10),
	t_94 numeric(20,6),
	t_94e character varying(10),
	t_95 numeric(20,6),
	t_95e character varying(10),
	t_96 numeric(20,6),
	t_96e character varying(10),
	t_97 numeric(20,6),
	t_97e character varying(10),
	t_98 numeric(20,6),
	t_98e character varying(10),
	t_99 numeric(20,6),
	t_99e character varying(10),
	t_100 numeric(20,6),
	t_100e character varying(10),
	
    PRIMARY KEY (meter_name, customer, trading_date, receipt_date),
	UNIQUE (meter_name, customer, trading_date, receipt_date)
);

ALTER TABLE IF EXISTS measurements.mv_certified
    OWNER to postgres;	
		
	
-- *******************************************************************************
-- Table MV ATHENS AIRPORT MEASUREMENTS
-- Schema name: measurements
-- Table name: mv_athens_airport
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS measurements.mv_athens_airport
(
	meter_name character varying(20) NOT NULL,
    customer character varying(20),
    power_type character varying(20),
    trading_date date,
    receipt_date date,
    t_1 numeric(20,6),
	t_2 numeric(20,6),
	t_3 numeric(20,6),
	t_4 numeric(20,6),
	t_5 numeric(20,6),
	t_6 numeric(20,6),
	t_7 numeric(20,6),
	t_8 numeric(20,6),
	t_9 numeric(20,6),
	t_10 numeric(20,6),
	t_11 numeric(20,6),
	t_12 numeric(20,6),
	t_13 numeric(20,6),
	t_14 numeric(20,6),
	t_15 numeric(20,6),
	t_16 numeric(20,6),
	t_17 numeric(20,6),
	t_18 numeric(20,6),
	t_19 numeric(20,6),
	t_20 numeric(20,6),
	t_21 numeric(20,6),
	t_22 numeric(20,6),
	t_23 numeric(20,6),
	t_24 numeric(20,6),
	t_25 numeric(20,6),
	t_26 numeric(20,6),
	t_27 numeric(20,6),
	t_28 numeric(20,6),
	t_29 numeric(20,6),
	t_30 numeric(20,6),
	t_31 numeric(20,6),
	t_32 numeric(20,6),
	t_33 numeric(20,6),
	t_34 numeric(20,6),
	t_35 numeric(20,6),
	t_36 numeric(20,6),
	t_37 numeric(20,6),
	t_38 numeric(20,6),
	t_39 numeric(20,6),
	t_40 numeric(20,6),
	t_41 numeric(20,6),
	t_42 numeric(20,6),
	t_43 numeric(20,6),
	t_44 numeric(20,6),
	t_45 numeric(20,6),
	t_46 numeric(20,6),
	t_47 numeric(20,6),
	t_48 numeric(20,6),
	t_49 numeric(20,6),
	t_50 numeric(20,6),
	t_51 numeric(20,6),
	t_52 numeric(20,6),
	t_53 numeric(20,6),
	t_54 numeric(20,6),
	t_55 numeric(20,6),
	t_56 numeric(20,6),
	t_57 numeric(20,6),
	t_58 numeric(20,6),
	t_59 numeric(20,6),
	t_60 numeric(20,6),
	t_61 numeric(20,6),
	t_62 numeric(20,6),
	t_63 numeric(20,6),
	t_64 numeric(20,6),
	t_65 numeric(20,6),
	t_66 numeric(20,6),
	t_67 numeric(20,6),
	t_68 numeric(20,6),
	t_69 numeric(20,6),
	t_70 numeric(20,6),
	t_71 numeric(20,6),
	t_72 numeric(20,6),
	t_73 numeric(20,6),
	t_74 numeric(20,6),
	t_75 numeric(20,6),
	t_76 numeric(20,6),
	t_77 numeric(20,6),
	t_78 numeric(20,6),
	t_79 numeric(20,6),
	t_80 numeric(20,6),
	t_81 numeric(20,6),
	t_82 numeric(20,6),
	t_83 numeric(20,6),
	t_84 numeric(20,6),
	t_85 numeric(20,6),
	t_86 numeric(20,6),
	t_87 numeric(20,6),
	t_88 numeric(20,6),
	t_89 numeric(20,6),
	t_90 numeric(20,6),
	t_91 numeric(20,6),
	t_92 numeric(20,6),
	t_93 numeric(20,6),
	t_94 numeric(20,6),
	t_95 numeric(20,6),
	t_96 numeric(20,6),
	t_97 numeric(20,6),
	t_98 numeric(20,6),
	t_99 numeric(20,6),
	t_100 numeric(20,6),
	
    PRIMARY KEY (meter_name, customer, trading_date, receipt_date),
	UNIQUE (meter_name, customer, trading_date, receipt_date)
);

ALTER TABLE IF EXISTS measurements.mv_athens_airport
    OWNER to postgres;	
	
	
-- *******************************************************************************
-- Table MV CERTIFIED INJECTIONS
-- Schema name: measurements
-- Table name: mv_certified_injections
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS measurements.mv_certified_injections
(
	meter_name character varying(20) NOT NULL,
    customer character varying(20),
    power_type character varying(20),
    trading_date date,
    receipt_date date,
    t_1 numeric(20,6),
	t_1e character varying(10),
	t_2 numeric(20,6),
	t_2e character varying(10),
	t_3 numeric(20,6),
	t_3e character varying(10),
	t_4 numeric(20,6),
	t_4e character varying(10),
	t_5 numeric(20,6),
	t_5e character varying(10),
	t_6 numeric(20,6),
	t_6e character varying(10),
	t_7 numeric(20,6),
	t_7e character varying(10),
	t_8 numeric(20,6),
	t_8e character varying(10),
	t_9 numeric(20,6),
	t_9e character varying(10),
	t_10 numeric(20,6),
	t_10e character varying(10),
	t_11 numeric(20,6),
	t_11e character varying(10),
	t_12 numeric(20,6),
	t_12e character varying(10),
	t_13 numeric(20,6),
	t_13e character varying(10),
	t_14 numeric(20,6),
	t_14e character varying(10),
	t_15 numeric(20,6),
	t_15e character varying(10),
	t_16 numeric(20,6),
	t_16e character varying(10),
	t_17 numeric(20,6),
	t_17e character varying(10),
	t_18 numeric(20,6),
	t_18e character varying(10),
	t_19 numeric(20,6),
	t_19e character varying(10),
	t_20 numeric(20,6),
	t_20e character varying(10),
	t_21 numeric(20,6),
	t_21e character varying(10),
	t_22 numeric(20,6),
	t_22e character varying(10),
	t_23 numeric(20,6),
	t_23e character varying(10),
	t_24 numeric(20,6),
	t_24e character varying(10),
	t_25 numeric(20,6),
	t_25e character varying(10),
	t_26 numeric(20,6),
	t_26e character varying(10),
	t_27 numeric(20,6),
	t_27e character varying(10),
	t_28 numeric(20,6),
	t_28e character varying(10),
	t_29 numeric(20,6),
	t_29e character varying(10),
	t_30 numeric(20,6),
	t_30e character varying(10),
	t_31 numeric(20,6),
	t_31e character varying(10),
	t_32 numeric(20,6),
	t_32e character varying(10),
	t_33 numeric(20,6),
	t_33e character varying(10),
	t_34 numeric(20,6),
	t_34e character varying(10),
	t_35 numeric(20,6),
	t_35e character varying(10),
	t_36 numeric(20,6),
	t_36e character varying(10),
	t_37 numeric(20,6),
	t_37e character varying(10),
	t_38 numeric(20,6),
	t_38e character varying(10),
	t_39 numeric(20,6),
	t_39e character varying(10),
	t_40 numeric(20,6),
	t_40e character varying(10),
	t_41 numeric(20,6),
	t_41e character varying(10),
	t_42 numeric(20,6),
	t_42e character varying(10),
	t_43 numeric(20,6),
	t_43e character varying(10),
	t_44 numeric(20,6),
	t_44e character varying(10),
	t_45 numeric(20,6),
	t_45e character varying(10),
	t_46 numeric(20,6),
	t_46e character varying(10),
	t_47 numeric(20,6),
	t_47e character varying(10),
	t_48 numeric(20,6),
	t_48e character varying(10),
	t_49 numeric(20,6),
	t_49e character varying(10),
	t_50 numeric(20,6),
	t_50e character varying(10),
	t_51 numeric(20,6),
	t_51e character varying(10),
	t_52 numeric(20,6),
	t_52e character varying(10),
	t_53 numeric(20,6),
	t_53e character varying(10),
	t_54 numeric(20,6),
	t_54e character varying(10),
	t_55 numeric(20,6),
	t_55e character varying(10),
	t_56 numeric(20,6),
	t_56e character varying(10),
	t_57 numeric(20,6),
	t_57e character varying(10),
	t_58 numeric(20,6),
	t_58e character varying(10),
	t_59 numeric(20,6),
	t_59e character varying(10),
	t_60 numeric(20,6),
	t_60e character varying(10),
	t_61 numeric(20,6),
	t_61e character varying(10),
	t_62 numeric(20,6),
	t_62e character varying(10),
	t_63 numeric(20,6),
	t_63e character varying(10),
	t_64 numeric(20,6),
	t_64e character varying(10),
	t_65 numeric(20,6),
	t_65e character varying(10),
	t_66 numeric(20,6),
	t_66e character varying(10),
	t_67 numeric(20,6),
	t_67e character varying(10),
	t_68 numeric(20,6),
	t_68e character varying(10),
	t_69 numeric(20,6),
	t_69e character varying(10),
	t_70 numeric(20,6),
	t_70e character varying(10),
	t_71 numeric(20,6),
	t_71e character varying(10),
	t_72 numeric(20,6),
	t_72e character varying(10),
	t_73 numeric(20,6),
	t_73e character varying(10),
	t_74 numeric(20,6),
	t_74e character varying(10),
	t_75 numeric(20,6),
	t_75e character varying(10),
	t_76 numeric(20,6),
	t_76e character varying(10),
	t_77 numeric(20,6),
	t_77e character varying(10),
	t_78 numeric(20,6),
	t_78e character varying(10),
	t_79 numeric(20,6),
	t_79e character varying(10),
	t_80 numeric(20,6),
	t_80e character varying(10),
	t_81 numeric(20,6),
	t_81e character varying(10),
	t_82 numeric(20,6),
	t_82e character varying(10),
	t_83 numeric(20,6),
	t_83e character varying(10),
	t_84 numeric(20,6),
	t_84e character varying(10),
	t_85 numeric(20,6),
	t_85e character varying(10),
	t_86 numeric(20,6),
	t_86e character varying(10),
	t_87 numeric(20,6),
	t_87e character varying(10),
	t_88 numeric(20,6),
	t_88e character varying(10),
	t_89 numeric(20,6),
	t_89e character varying(10),
	t_90 numeric(20,6),
	t_90e character varying(10),
	t_91 numeric(20,6),
	t_91e character varying(10),
	t_92 numeric(20,6),
	t_92e character varying(10),
	t_93 numeric(20,6),
	t_93e character varying(10),
	t_94 numeric(20,6),
	t_94e character varying(10),
	t_95 numeric(20,6),
	t_95e character varying(10),
	t_96 numeric(20,6),
	t_96e character varying(10),
	t_97 numeric(20,6),
	t_97e character varying(10),
	t_98 numeric(20,6),
	t_98e character varying(10),
	t_99 numeric(20,6),
	t_99e character varying(10),
	t_100 numeric(20,6),
	t_100e character varying(10),
	
    PRIMARY KEY (meter_name, customer, trading_date, receipt_date),
	UNIQUE (meter_name, customer, trading_date, receipt_date)
);

ALTER TABLE IF EXISTS measurements.mv_certified_injections
    OWNER to postgres;
	
	
-- *******************************************************************************
-- Table MV CERTIFIED PRODUCTION
-- Schema name: measurements
-- Table name: mv_certified_production
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS measurements.mv_certified_production
(
	meter_name character varying(20) NOT NULL,
    customer character varying(20),
    power_type character varying(20),
    trading_date date,
    receipt_date date,
    t_1 numeric(20,6),
	t_1e character varying(10),
	t_2 numeric(20,6),
	t_2e character varying(10),
	t_3 numeric(20,6),
	t_3e character varying(10),
	t_4 numeric(20,6),
	t_4e character varying(10),
	t_5 numeric(20,6),
	t_5e character varying(10),
	t_6 numeric(20,6),
	t_6e character varying(10),
	t_7 numeric(20,6),
	t_7e character varying(10),
	t_8 numeric(20,6),
	t_8e character varying(10),
	t_9 numeric(20,6),
	t_9e character varying(10),
	t_10 numeric(20,6),
	t_10e character varying(10),
	t_11 numeric(20,6),
	t_11e character varying(10),
	t_12 numeric(20,6),
	t_12e character varying(10),
	t_13 numeric(20,6),
	t_13e character varying(10),
	t_14 numeric(20,6),
	t_14e character varying(10),
	t_15 numeric(20,6),
	t_15e character varying(10),
	t_16 numeric(20,6),
	t_16e character varying(10),
	t_17 numeric(20,6),
	t_17e character varying(10),
	t_18 numeric(20,6),
	t_18e character varying(10),
	t_19 numeric(20,6),
	t_19e character varying(10),
	t_20 numeric(20,6),
	t_20e character varying(10),
	t_21 numeric(20,6),
	t_21e character varying(10),
	t_22 numeric(20,6),
	t_22e character varying(10),
	t_23 numeric(20,6),
	t_23e character varying(10),
	t_24 numeric(20,6),
	t_24e character varying(10),
	t_25 numeric(20,6),
	t_25e character varying(10),
	t_26 numeric(20,6),
	t_26e character varying(10),
	t_27 numeric(20,6),
	t_27e character varying(10),
	t_28 numeric(20,6),
	t_28e character varying(10),
	t_29 numeric(20,6),
	t_29e character varying(10),
	t_30 numeric(20,6),
	t_30e character varying(10),
	t_31 numeric(20,6),
	t_31e character varying(10),
	t_32 numeric(20,6),
	t_32e character varying(10),
	t_33 numeric(20,6),
	t_33e character varying(10),
	t_34 numeric(20,6),
	t_34e character varying(10),
	t_35 numeric(20,6),
	t_35e character varying(10),
	t_36 numeric(20,6),
	t_36e character varying(10),
	t_37 numeric(20,6),
	t_37e character varying(10),
	t_38 numeric(20,6),
	t_38e character varying(10),
	t_39 numeric(20,6),
	t_39e character varying(10),
	t_40 numeric(20,6),
	t_40e character varying(10),
	t_41 numeric(20,6),
	t_41e character varying(10),
	t_42 numeric(20,6),
	t_42e character varying(10),
	t_43 numeric(20,6),
	t_43e character varying(10),
	t_44 numeric(20,6),
	t_44e character varying(10),
	t_45 numeric(20,6),
	t_45e character varying(10),
	t_46 numeric(20,6),
	t_46e character varying(10),
	t_47 numeric(20,6),
	t_47e character varying(10),
	t_48 numeric(20,6),
	t_48e character varying(10),
	t_49 numeric(20,6),
	t_49e character varying(10),
	t_50 numeric(20,6),
	t_50e character varying(10),
	t_51 numeric(20,6),
	t_51e character varying(10),
	t_52 numeric(20,6),
	t_52e character varying(10),
	t_53 numeric(20,6),
	t_53e character varying(10),
	t_54 numeric(20,6),
	t_54e character varying(10),
	t_55 numeric(20,6),
	t_55e character varying(10),
	t_56 numeric(20,6),
	t_56e character varying(10),
	t_57 numeric(20,6),
	t_57e character varying(10),
	t_58 numeric(20,6),
	t_58e character varying(10),
	t_59 numeric(20,6),
	t_59e character varying(10),
	t_60 numeric(20,6),
	t_60e character varying(10),
	t_61 numeric(20,6),
	t_61e character varying(10),
	t_62 numeric(20,6),
	t_62e character varying(10),
	t_63 numeric(20,6),
	t_63e character varying(10),
	t_64 numeric(20,6),
	t_64e character varying(10),
	t_65 numeric(20,6),
	t_65e character varying(10),
	t_66 numeric(20,6),
	t_66e character varying(10),
	t_67 numeric(20,6),
	t_67e character varying(10),
	t_68 numeric(20,6),
	t_68e character varying(10),
	t_69 numeric(20,6),
	t_69e character varying(10),
	t_70 numeric(20,6),
	t_70e character varying(10),
	t_71 numeric(20,6),
	t_71e character varying(10),
	t_72 numeric(20,6),
	t_72e character varying(10),
	t_73 numeric(20,6),
	t_73e character varying(10),
	t_74 numeric(20,6),
	t_74e character varying(10),
	t_75 numeric(20,6),
	t_75e character varying(10),
	t_76 numeric(20,6),
	t_76e character varying(10),
	t_77 numeric(20,6),
	t_77e character varying(10),
	t_78 numeric(20,6),
	t_78e character varying(10),
	t_79 numeric(20,6),
	t_79e character varying(10),
	t_80 numeric(20,6),
	t_80e character varying(10),
	t_81 numeric(20,6),
	t_81e character varying(10),
	t_82 numeric(20,6),
	t_82e character varying(10),
	t_83 numeric(20,6),
	t_83e character varying(10),
	t_84 numeric(20,6),
	t_84e character varying(10),
	t_85 numeric(20,6),
	t_85e character varying(10),
	t_86 numeric(20,6),
	t_86e character varying(10),
	t_87 numeric(20,6),
	t_87e character varying(10),
	t_88 numeric(20,6),
	t_88e character varying(10),
	t_89 numeric(20,6),
	t_89e character varying(10),
	t_90 numeric(20,6),
	t_90e character varying(10),
	t_91 numeric(20,6),
	t_91e character varying(10),
	t_92 numeric(20,6),
	t_92e character varying(10),
	t_93 numeric(20,6),
	t_93e character varying(10),
	t_94 numeric(20,6),
	t_94e character varying(10),
	t_95 numeric(20,6),
	t_95e character varying(10),
	t_96 numeric(20,6),
	t_96e character varying(10),
	t_97 numeric(20,6),
	t_97e character varying(10),
	t_98 numeric(20,6),
	t_98e character varying(10),
	t_99 numeric(20,6),
	t_99e character varying(10),
	t_100 numeric(20,6),
	t_100e character varying(10),
	
    PRIMARY KEY (meter_name, customer, trading_date, receipt_date),
	UNIQUE (meter_name, customer, trading_date, receipt_date)
);

ALTER TABLE IF EXISTS measurements.mv_certified_production
    OWNER to postgres;	


-- *******************************************************************************
-- Table MV REVISED DATA
-- Schema name: measurements
-- Table name: mv_revised
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS measurements.mv_revised
(
	meter_name character varying(20) NOT NULL,
    customer character varying(20),
    power_type character varying(20),
    trading_date date,
    receipt_date date,
    t_1 numeric(20,6),
	t_1e character varying(10),
	t_2 numeric(20,6),
	t_2e character varying(10),
	t_3 numeric(20,6),
	t_3e character varying(10),
	t_4 numeric(20,6),
	t_4e character varying(10),
	t_5 numeric(20,6),
	t_5e character varying(10),
	t_6 numeric(20,6),
	t_6e character varying(10),
	t_7 numeric(20,6),
	t_7e character varying(10),
	t_8 numeric(20,6),
	t_8e character varying(10),
	t_9 numeric(20,6),
	t_9e character varying(10),
	t_10 numeric(20,6),
	t_10e character varying(10),
	t_11 numeric(20,6),
	t_11e character varying(10),
	t_12 numeric(20,6),
	t_12e character varying(10),
	t_13 numeric(20,6),
	t_13e character varying(10),
	t_14 numeric(20,6),
	t_14e character varying(10),
	t_15 numeric(20,6),
	t_15e character varying(10),
	t_16 numeric(20,6),
	t_16e character varying(10),
	t_17 numeric(20,6),
	t_17e character varying(10),
	t_18 numeric(20,6),
	t_18e character varying(10),
	t_19 numeric(20,6),
	t_19e character varying(10),
	t_20 numeric(20,6),
	t_20e character varying(10),
	t_21 numeric(20,6),
	t_21e character varying(10),
	t_22 numeric(20,6),
	t_22e character varying(10),
	t_23 numeric(20,6),
	t_23e character varying(10),
	t_24 numeric(20,6),
	t_24e character varying(10),
	t_25 numeric(20,6),
	t_25e character varying(10),
	t_26 numeric(20,6),
	t_26e character varying(10),
	t_27 numeric(20,6),
	t_27e character varying(10),
	t_28 numeric(20,6),
	t_28e character varying(10),
	t_29 numeric(20,6),
	t_29e character varying(10),
	t_30 numeric(20,6),
	t_30e character varying(10),
	t_31 numeric(20,6),
	t_31e character varying(10),
	t_32 numeric(20,6),
	t_32e character varying(10),
	t_33 numeric(20,6),
	t_33e character varying(10),
	t_34 numeric(20,6),
	t_34e character varying(10),
	t_35 numeric(20,6),
	t_35e character varying(10),
	t_36 numeric(20,6),
	t_36e character varying(10),
	t_37 numeric(20,6),
	t_37e character varying(10),
	t_38 numeric(20,6),
	t_38e character varying(10),
	t_39 numeric(20,6),
	t_39e character varying(10),
	t_40 numeric(20,6),
	t_40e character varying(10),
	t_41 numeric(20,6),
	t_41e character varying(10),
	t_42 numeric(20,6),
	t_42e character varying(10),
	t_43 numeric(20,6),
	t_43e character varying(10),
	t_44 numeric(20,6),
	t_44e character varying(10),
	t_45 numeric(20,6),
	t_45e character varying(10),
	t_46 numeric(20,6),
	t_46e character varying(10),
	t_47 numeric(20,6),
	t_47e character varying(10),
	t_48 numeric(20,6),
	t_48e character varying(10),
	t_49 numeric(20,6),
	t_49e character varying(10),
	t_50 numeric(20,6),
	t_50e character varying(10),
	t_51 numeric(20,6),
	t_51e character varying(10),
	t_52 numeric(20,6),
	t_52e character varying(10),
	t_53 numeric(20,6),
	t_53e character varying(10),
	t_54 numeric(20,6),
	t_54e character varying(10),
	t_55 numeric(20,6),
	t_55e character varying(10),
	t_56 numeric(20,6),
	t_56e character varying(10),
	t_57 numeric(20,6),
	t_57e character varying(10),
	t_58 numeric(20,6),
	t_58e character varying(10),
	t_59 numeric(20,6),
	t_59e character varying(10),
	t_60 numeric(20,6),
	t_60e character varying(10),
	t_61 numeric(20,6),
	t_61e character varying(10),
	t_62 numeric(20,6),
	t_62e character varying(10),
	t_63 numeric(20,6),
	t_63e character varying(10),
	t_64 numeric(20,6),
	t_64e character varying(10),
	t_65 numeric(20,6),
	t_65e character varying(10),
	t_66 numeric(20,6),
	t_66e character varying(10),
	t_67 numeric(20,6),
	t_67e character varying(10),
	t_68 numeric(20,6),
	t_68e character varying(10),
	t_69 numeric(20,6),
	t_69e character varying(10),
	t_70 numeric(20,6),
	t_70e character varying(10),
	t_71 numeric(20,6),
	t_71e character varying(10),
	t_72 numeric(20,6),
	t_72e character varying(10),
	t_73 numeric(20,6),
	t_73e character varying(10),
	t_74 numeric(20,6),
	t_74e character varying(10),
	t_75 numeric(20,6),
	t_75e character varying(10),
	t_76 numeric(20,6),
	t_76e character varying(10),
	t_77 numeric(20,6),
	t_77e character varying(10),
	t_78 numeric(20,6),
	t_78e character varying(10),
	t_79 numeric(20,6),
	t_79e character varying(10),
	t_80 numeric(20,6),
	t_80e character varying(10),
	t_81 numeric(20,6),
	t_81e character varying(10),
	t_82 numeric(20,6),
	t_82e character varying(10),
	t_83 numeric(20,6),
	t_83e character varying(10),
	t_84 numeric(20,6),
	t_84e character varying(10),
	t_85 numeric(20,6),
	t_85e character varying(10),
	t_86 numeric(20,6),
	t_86e character varying(10),
	t_87 numeric(20,6),
	t_87e character varying(10),
	t_88 numeric(20,6),
	t_88e character varying(10),
	t_89 numeric(20,6),
	t_89e character varying(10),
	t_90 numeric(20,6),
	t_90e character varying(10),
	t_91 numeric(20,6),
	t_91e character varying(10),
	t_92 numeric(20,6),
	t_92e character varying(10),
	t_93 numeric(20,6),
	t_93e character varying(10),
	t_94 numeric(20,6),
	t_94e character varying(10),
	t_95 numeric(20,6),
	t_95e character varying(10),
	t_96 numeric(20,6),
	t_96e character varying(10),
	t_97 numeric(20,6),
	t_97e character varying(10),
	t_98 numeric(20,6),
	t_98e character varying(10),
	t_99 numeric(20,6),
	t_99e character varying(10),
	t_100 numeric(20,6),
	t_100e character varying(10),
	
    PRIMARY KEY (meter_name, customer, trading_date, receipt_date),
	UNIQUE (meter_name, customer, trading_date, receipt_date)
);

ALTER TABLE IF EXISTS measurements.mv_revised
    OWNER to postgres;		


-- *******************************************************************************
-- Table Wp1 SETTLEMENT
-- Schema name: market_data
-- Table name: balancing_market_settlement_wp1
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS market_data.balancing_market_settlement_wp1
(
	trading_date date,
	document_type character varying(20),
    group_type character varying(20),
    determinant_name character varying(50),
	balancing_responsible_party character varying(50),
	balancing_zone character varying(50),
	resource_object character varying(50),
	resolution character varying(10),
	brp_name character varying(20),
	attribute_1 character varying(100),
	attribute_2 character varying(100),
	attribute_3 character varying(100),
	attribute_4 character varying(100),
	attribute_5 character varying(100),
	pos_1 numeric(20,6),
	pos_2 numeric(20,6),
	pos_3 numeric(20,6),
	pos_4 numeric(20,6),
	pos_5 numeric(20,6),
	pos_6 numeric(20,6),
	pos_7 numeric(20,6),
	pos_8 numeric(20,6),
	pos_9 numeric(20,6),
	pos_10 numeric(20,6),
	pos_11 numeric(20,6),
	pos_12 numeric(20,6),
	pos_13 numeric(20,6),
	pos_14 numeric(20,6),
	pos_15 numeric(20,6),
	pos_16 numeric(20,6),
	pos_17 numeric(20,6),
	pos_18 numeric(20,6),
	pos_19 numeric(20,6),
	pos_20 numeric(20,6),
	pos_21 numeric(20,6),
	pos_22 numeric(20,6),
	pos_23 numeric(20,6),
	pos_24 numeric(20,6),
	pos_25 numeric(20,6),
	pos_26 numeric(20,6),
	pos_27 numeric(20,6),
	pos_28 numeric(20,6),
	pos_29 numeric(20,6),
	pos_30 numeric(20,6),
	pos_31 numeric(20,6),
	pos_32 numeric(20,6),
	pos_33 numeric(20,6),
	pos_34 numeric(20,6),
	pos_35 numeric(20,6),
	pos_36 numeric(20,6),
	pos_37 numeric(20,6),
	pos_38 numeric(20,6),
	pos_39 numeric(20,6),
	pos_40 numeric(20,6),
	pos_41 numeric(20,6),
	pos_42 numeric(20,6),
	pos_43 numeric(20,6),
	pos_44 numeric(20,6),
	pos_45 numeric(20,6),
	pos_46 numeric(20,6),
	pos_47 numeric(20,6),
	pos_48 numeric(20,6),
	pos_49 numeric(20,6),
	pos_50 numeric(20,6),
	pos_51 numeric(20,6),
	pos_52 numeric(20,6),
	pos_53 numeric(20,6),
	pos_54 numeric(20,6),
	pos_55 numeric(20,6),
	pos_56 numeric(20,6),
	pos_57 numeric(20,6),
	pos_58 numeric(20,6),
	pos_59 numeric(20,6),
	pos_60 numeric(20,6),
	pos_61 numeric(20,6),
	pos_62 numeric(20,6),
	pos_63 numeric(20,6),
	pos_64 numeric(20,6),
	pos_65 numeric(20,6),
	pos_66 numeric(20,6),
	pos_67 numeric(20,6),
	pos_68 numeric(20,6),
	pos_69 numeric(20,6),
	pos_70 numeric(20,6),
	pos_71 numeric(20,6),
	pos_72 numeric(20,6),
	pos_73 numeric(20,6),
	pos_74 numeric(20,6),
	pos_75 numeric(20,6),
	pos_76 numeric(20,6),
	pos_77 numeric(20,6),
	pos_78 numeric(20,6),
	pos_79 numeric(20,6),
	pos_80 numeric(20,6),
	pos_81 numeric(20,6),
	pos_82 numeric(20,6),
	pos_83 numeric(20,6),
	pos_84 numeric(20,6),
	pos_85 numeric(20,6),
	pos_86 numeric(20,6),
	pos_87 numeric(20,6),
	pos_88 numeric(20,6),
	pos_89 numeric(20,6),
	pos_90 numeric(20,6),
	pos_91 numeric(20,6),
	pos_92 numeric(20,6),
	pos_93 numeric(20,6),
	pos_94 numeric(20,6),
	pos_95 numeric(20,6),
	pos_96 numeric(20,6),
	pos_97 numeric(20,6),
	pos_98 numeric(20,6),
	pos_99 numeric(20,6),
	pos_100 numeric(20,6),
	
    PRIMARY KEY (trading_date, document_type, group_type, determinant_name, balancing_responsible_party, balancing_zone, resource_object),
	UNIQUE (trading_date, document_type, group_type, determinant_name, balancing_responsible_party, balancing_zone, resource_object)
);

ALTER TABLE IF EXISTS market_data.balancing_market_settlement_wp1
    OWNER to postgres;
	
	
-- *******************************************************************************
-- Table Wp7 SETTLEMENT
-- Schema name: market_data
-- Table name: balancing_market_settlement_wp7
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS market_data.balancing_market_settlement_wp7
(
	trading_date date,
	document_type character varying(20),
    group_type character varying(20),
    determinant_name character varying(50),
	balancing_responsible_party character varying(50),
	balancing_zone character varying(50),
	resource_object character varying(50),
	resolution character varying(10),
	brp_name character varying(20),
	attribute_1 character varying(100),
	attribute_2 character varying(100),
	attribute_3 character varying(100),
	attribute_4 character varying(100),
	attribute_5 character varying(100),
	pos_1 numeric(20,6),
	pos_2 numeric(20,6),
	pos_3 numeric(20,6),
	pos_4 numeric(20,6),
	pos_5 numeric(20,6),
	pos_6 numeric(20,6),
	pos_7 numeric(20,6),
	pos_8 numeric(20,6),
	pos_9 numeric(20,6),
	pos_10 numeric(20,6),
	pos_11 numeric(20,6),
	pos_12 numeric(20,6),
	pos_13 numeric(20,6),
	pos_14 numeric(20,6),
	pos_15 numeric(20,6),
	pos_16 numeric(20,6),
	pos_17 numeric(20,6),
	pos_18 numeric(20,6),
	pos_19 numeric(20,6),
	pos_20 numeric(20,6),
	pos_21 numeric(20,6),
	pos_22 numeric(20,6),
	pos_23 numeric(20,6),
	pos_24 numeric(20,6),
	pos_25 numeric(20,6),
	pos_26 numeric(20,6),
	pos_27 numeric(20,6),
	pos_28 numeric(20,6),
	pos_29 numeric(20,6),
	pos_30 numeric(20,6),
	pos_31 numeric(20,6),
	pos_32 numeric(20,6),
	pos_33 numeric(20,6),
	pos_34 numeric(20,6),
	pos_35 numeric(20,6),
	pos_36 numeric(20,6),
	pos_37 numeric(20,6),
	pos_38 numeric(20,6),
	pos_39 numeric(20,6),
	pos_40 numeric(20,6),
	pos_41 numeric(20,6),
	pos_42 numeric(20,6),
	pos_43 numeric(20,6),
	pos_44 numeric(20,6),
	pos_45 numeric(20,6),
	pos_46 numeric(20,6),
	pos_47 numeric(20,6),
	pos_48 numeric(20,6),
	pos_49 numeric(20,6),
	pos_50 numeric(20,6),
	pos_51 numeric(20,6),
	pos_52 numeric(20,6),
	pos_53 numeric(20,6),
	pos_54 numeric(20,6),
	pos_55 numeric(20,6),
	pos_56 numeric(20,6),
	pos_57 numeric(20,6),
	pos_58 numeric(20,6),
	pos_59 numeric(20,6),
	pos_60 numeric(20,6),
	pos_61 numeric(20,6),
	pos_62 numeric(20,6),
	pos_63 numeric(20,6),
	pos_64 numeric(20,6),
	pos_65 numeric(20,6),
	pos_66 numeric(20,6),
	pos_67 numeric(20,6),
	pos_68 numeric(20,6),
	pos_69 numeric(20,6),
	pos_70 numeric(20,6),
	pos_71 numeric(20,6),
	pos_72 numeric(20,6),
	pos_73 numeric(20,6),
	pos_74 numeric(20,6),
	pos_75 numeric(20,6),
	pos_76 numeric(20,6),
	pos_77 numeric(20,6),
	pos_78 numeric(20,6),
	pos_79 numeric(20,6),
	pos_80 numeric(20,6),
	pos_81 numeric(20,6),
	pos_82 numeric(20,6),
	pos_83 numeric(20,6),
	pos_84 numeric(20,6),
	pos_85 numeric(20,6),
	pos_86 numeric(20,6),
	pos_87 numeric(20,6),
	pos_88 numeric(20,6),
	pos_89 numeric(20,6),
	pos_90 numeric(20,6),
	pos_91 numeric(20,6),
	pos_92 numeric(20,6),
	pos_93 numeric(20,6),
	pos_94 numeric(20,6),
	pos_95 numeric(20,6),
	pos_96 numeric(20,6),
	pos_97 numeric(20,6),
	pos_98 numeric(20,6),
	pos_99 numeric(20,6),
	pos_100 numeric(20,6),
	
    PRIMARY KEY (trading_date, document_type, group_type, determinant_name, balancing_responsible_party, balancing_zone, resource_object),
	UNIQUE (trading_date, document_type, group_type, determinant_name, balancing_responsible_party, balancing_zone, resource_object)
);

ALTER TABLE IF EXISTS market_data.balancing_market_settlement_wp7
    OWNER to postgres;
	
	
-- *******************************************************************************
-- Table CRETE MARKET SCHEDULE
-- Schema name: market_data
-- Table name: crete_market_schedule
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS market_data.crete_market_schedule
(
	asset_id character varying(100),
	trading_date date,
	trading_period int,
	price numeric(20,6),
	volume numeric(20,6),
	
    PRIMARY KEY (asset_id, trading_date, trading_period),
	UNIQUE (asset_id, trading_date, trading_period)
);

ALTER TABLE IF EXISTS market_data.crete_market_schedule
    OWNER to postgres;	
	

-- *******************************************************************************
-- Table CRETE MARKET SCHEDULE
-- Schema name: market_data
-- Table name: crete_market_schedule
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS market_data.system_data
(
	trading_date_from TIMESTAMP NOT NULL,
	trading_date_to TIMESTAMP NOT NULL,
	update_date TIMESTAMP NOT NULL,
	file_name character varying(20),
	total_net_system_generation numeric(20,3),
	inter_total_balance numeric(20,3),
	total_system_load numeric(20,3),
	grand_total_system_consumption numeric(20,3),
	total_pumping_consumption numeric(20,3),
	total_customer_consumption numeric(20,3),
	total_gen_aux_consumption numeric(20,3),
	total_net_system_load numeric(20,3),
	system_losses numeric(20,3),
	sys_tot_net_energy_total numeric(20,3),
	network_res_prod numeric(20,3),
	total_in_energy_mv numeric(20,3),
	total_consumption_mv numeric(20,3),
	total_energy_cons_lv numeric(20,3),
	system_to_crete numeric(20,3),
	crete_to_system numeric(20,3),
	
    PRIMARY KEY (trading_date_from, trading_date_to, update_date, file_name),
	UNIQUE (trading_date_from, trading_date_to, update_date, file_name)
);

ALTER TABLE IF EXISTS market_data.system_data
    OWNER to postgres;	
	

-- *******************************************************************************
-- Table LV AGGREGATED MEASUREMENTS
-- Schema name: tests
-- Table name: lv_aggregated_measurements
-- *******************************************************************************
CREATE TABLE IF NOT EXISTS tests.lv_aggregated_measurements
(
	examined_file character varying(30),
	consumption_year INT,
	consumption numeric(25,2),
	
    PRIMARY KEY (examined_file, consumption_year),
	UNIQUE (examined_file, consumption_year)
);
ALTER TABLE IF EXISTS tests.lv_aggregated_measurements OWNER to postgres;		
	
	
--- ==========================================================================================================================
--- = VIEWS			==========================================================================================================
--- ==========================================================================================================================

-- *******************************************************************************
-- View: HOURLY SETTLEMENT METERED QUANTITIES
-- Schema name: market_data
-- View name: week1_settlement_hourly_metered_quantities
-- *******************************************************************************
CREATE MATERIALIZED VIEW IF NOT EXISTS market_data.week1_settlement_hourly_metered_quantities AS
SELECT voltage_entity, date_trunc('hour', settlement_date_from) AS settlement_date, SUM(settlement_value) 
FROM market_data.week1_settlement_metered_quantities
GROUP BY voltage_entity, date_trunc('hour', settlement_date_from)
ORDER BY voltage_entity ASC, settlement_date ASC;